<ng-container *ngIf="service.authenticated$ | async">
  <mat-toolbar class="toolbar mat-elevation-z1" color="primary">
    <mat-toolbar class="toolbar--content" color="primary">
    
      <ng-container *ngIf="service.adminPortal$ | async;else defaultAppTitle">
        <span class="toolbar--app-name" routerLink="/admin">Admin Portal</span>
      </ng-container>
      <ng-template #defaultAppTitle>
        <span class="toolbar--app-name" routerLink="/">Cuisine Connect</span>
      </ng-template>
  
      <ng-container *ngIf="service.authState.currentUser$| async as currentUser">

        <ng-container *ngIf="service.adminPortal$ | async;else defaultAppNavigations">
          <button mat-button routerLink="/admin">Dashboard</button>
          <button mat-button routerLink="/admin/manage-cuisines">Manage cuisines</button>
          <button mat-button routerLink="/admin/manage-recipes">Manage recipes</button>
          <button mat-button routerLink="/admin/manage-users">Manage users</button>
        </ng-container>
        <ng-template #defaultAppNavigations>
          <button mat-button routerLink="/">Cuisine categories</button>
          <button mat-button routerLink="/search-dish">Search a dish</button>
          <button mat-button routerLink="/add-recipe">Add a recipe</button>
        </ng-template>

  
        <div class="toolbar--actions">
          <div
            class="toolbar--image-button"
            [matMenuTriggerFor]="userMenu"
            #userMenuTrigger="matMenuTrigger">
            <img [src]="currentUser.photoURL" alt="user-image" height="45" width="45">
            <mat-icon>arrow_drop_{{ userMenuTrigger.menuOpen ? 'up' : 'down' }}</mat-icon>
          </div>
          <div
            matRipple
            class="toolbar--language"
            [matMenuTriggerFor]="languageMenu"
            #languageMenuTrigger="matMenuTrigger">
            <span>{{ (service.language$ | async) | uppercase }}</span>
            <mat-icon>language</mat-icon>
          </div>
        </div>

        <mat-menu 
          xPosition="before"
          #userMenu="matMenu">
          <ng-container *ngIf="service.adminPortal$ | async;else defaultMenuSwitch">
            <button mat-menu-item routerLink="/">
              <mat-icon>autorenew</mat-icon>
              <span>Switch to Cuisine Connect</span>
            </button>
            <button mat-menu-item (click)="service.logout()">
              <mat-icon>logout</mat-icon>
              <span>Logout</span>
            </button>
          </ng-container>
          <ng-template #defaultMenuSwitch>
            <button mat-menu-item routerLink="/manage-profile">
              <mat-icon>person</mat-icon>
              <span>Manage profile</span>
            </button>
            <button mat-menu-item routerLink="/admin">
              <mat-icon>admin_panel_settings</mat-icon>
              <span>Switch to Admin Portal</span>
            </button>
            <button mat-menu-item (click)="service.logout()">
              <mat-icon>logout</mat-icon>
              <span>Logout</span>
            </button>
          </ng-template>
        </mat-menu>

        <mat-menu 
          xPosition="before"
          #languageMenu="matMenu">
          <button mat-menu-item (click)="service.changeLanguage('en')">English</button>
          <button mat-menu-item (click)="service.changeLanguage('lv')">Latvian</button>
          <button mat-menu-item (click)="service.changeLanguage('ru')">Russian</button>
        </mat-menu>

      </ng-container>
  
    </mat-toolbar>
  </mat-toolbar>
</ng-container>

<div class="root" [ngClass]="{ authenticated: service.authenticated$ | async }">
  <div class="root--content">
    <div class="root--content-outlet">
      <router-outlet></router-outlet>
    </div>
    <div class="root--content-footer" *ngIf="service.authenticated$ | async">
      <p>©2023 <span routerLink="/">Cuisine Connect.</span> All rights reserved.</p>
    </div>
  </div>
</div>

<div class="root--content-footer auth" *ngIf="!(service.authenticated$ | async)">
  <p>©2023 <span routerLink="/">Cuisine Connect.</span> All rights reserved.</p>
</div>
